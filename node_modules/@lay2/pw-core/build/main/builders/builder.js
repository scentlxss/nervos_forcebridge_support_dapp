"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Builder = void 0;
const models_1 = require("../models");
const __1 = __importDefault(require(".."));
const FEE_BASE = 1000;
class Builder {
    constructor(feeRate = Builder.MIN_FEE_RATE, collector = __1.default.defaultCollector, witnessArgs = Builder.WITNESS_ARGS.Secp256k1) {
        this.feeRate = feeRate;
        this.collector = collector;
        this.witnessArgs = witnessArgs;
    }
    static calcFee(tx, feeRate = Builder.MIN_FEE_RATE) {
        if (feeRate < Builder.MIN_FEE_RATE) {
            feeRate = Builder.MIN_FEE_RATE;
        }
        const txSize = tx.getSize();
        const fee = (feeRate / FEE_BASE) * txSize;
        return new models_1.Amount(fee.toString(), models_1.AmountUnit.shannon);
    }
    getFee() {
        return this.fee;
    }
}
exports.Builder = Builder;
Builder.MIN_FEE_RATE = 1000;
Builder.MIN_CHANGE = new models_1.Amount('61', models_1.AmountUnit.ckb);
Builder.WITNESS_ARGS = {
    Secp256k1: {
        lock: '0x' + '0'.repeat(132),
        input_type: '',
        output_type: '',
    },
    RawSecp256k1: {
        lock: '0x' + '0'.repeat(130),
        input_type: '',
        output_type: '',
    },
    Secp256r1: {
        lock: '0x' + '0'.repeat(600),
        input_type: '',
        output_type: '',
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9idWlsZGVycy9idWlsZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLHNDQUE0RDtBQUU1RCwyQ0FBd0I7QUFHeEIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDO0FBU3RCLE1BQXNCLE9BQU87SUFtQzNCLFlBQ1ksVUFBa0IsT0FBTyxDQUFDLFlBQVksRUFDdEMsWUFBdUMsV0FBTSxDQUFDLGdCQUFnQixFQUM5RCxjQUEyQixPQUFPLENBQUMsWUFBWSxDQUFDLFNBQVM7UUFGekQsWUFBTyxHQUFQLE9BQU8sQ0FBK0I7UUFDdEMsY0FBUyxHQUFULFNBQVMsQ0FBcUQ7UUFDOUQsZ0JBQVcsR0FBWCxXQUFXLENBQThDO0lBQ2xFLENBQUM7SUFsQkosTUFBTSxDQUFDLE9BQU8sQ0FDWixFQUFlLEVBQ2YsVUFBa0IsT0FBTyxDQUFDLFlBQVk7UUFFdEMsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFlBQVksRUFBRTtZQUNsQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztTQUNoQztRQUNELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM1QixNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDMUMsT0FBTyxJQUFJLGVBQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsbUJBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBVUQsTUFBTTtRQUNKLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDOztBQTNDSCwwQkE4Q0M7QUE3Q2lCLG9CQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLGtCQUFVLEdBQUcsSUFBSSxlQUFNLENBQUMsSUFBSSxFQUFFLG1CQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUMsb0JBQVksR0FBRztJQUM3QixTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7SUFDRCxZQUFZLEVBQUU7UUFDWixJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7SUFDRCxTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7Q0FDRixDQUFDIn0=